// ======================================================
// components/_c-typography.scss
// Einheitliches Typografiesystem mit fluidem Scaling (fixe Units)
// ======================================================

@use '../base/b-variables' as v;

// ------------------------------------------------------
// 1. Fluid-Scale-Funktion (unit-safe Version)
// ------------------------------------------------------
//
// Erzeugt dynamische Fontgrößen auf Basis der Viewportbreite.
// Beispiel:
//   font-size: fluid-size(16px, 48px);
// Ergibt: clamp(1rem, 0.5rem + 2vw, 3rem);

@function fluid-size($min, $max, $min-vw: 320, $max-vw: 1440) {
  // Entferne px/rem aus Rechenoperationen → rechne einheitenlos
  $slope: ($max - $min) / ($max-vw - $min-vw);
  $intercept: $min - $slope * $min-vw;

  // Einheitlich in rem umrechnen (angenommen: Basis 16px)
  $min-rem: $min / 16;
  $max-rem: $max / 16;
  $intercept-rem: $intercept / 16;

  @return clamp(#{$min-rem}rem, #{$intercept-rem}rem + #{100 * $slope}vw, #{$max-rem}rem);
}

// ------------------------------------------------------
// 2. Grundtypografie
// ------------------------------------------------------

body {
  font-family: v.$font-body;
  font-size: v.$font-size-base;
  line-height: v.$line-height-base;
  color: v.$color-text;
  font-weight: v.$font-weight-regular;
  background-color: v.$color-bg-light;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

// ------------------------------------------------------
// 3. Headline-Mixin (für Wiederverwendung)
// ------------------------------------------------------

@mixin heading($level, $min-size, $max-size) {
  font-family: v.$font-heading;
  line-height: v.$line-height-heading;
  color: v.$color-secondary;
  margin-bottom: 0.5em;
  font-weight: v.$font-weight-semibold;
  font-size: fluid-size($min-size, $max-size);

  @if $level == 1 {
    font-weight: v.$font-weight-bold;
  }
}

// ------------------------------------------------------
// 4. Headings
// ------------------------------------------------------

h1 { @include heading(1, 36px, 64px); }
h2 { @include heading(2, 28px, 48px); }
h3 { @include heading(3, 22px, 32px); }
h4 { @include heading(4, 18px, 24px); }

h1, h2, h3, h4 {
  &:not(:first-child) {
    margin-top: 1.5em;
  }
}

// ------------------------------------------------------
// 5. Fließtext & Kleingedrucktes
// ------------------------------------------------------

p {
  font-size: fluid-size(15px, 16px);
  line-height: v.$line-height-base;
  margin-bottom: 1.25em;
  color: v.$color-text;
}

small,
.caption {
  font-size: fluid-size(12px, 14px);
  color: v.$color-text-light;
  line-height: 1.4;
}

// ------------------------------------------------------
// 6. Links & Interaktionen
// ------------------------------------------------------

a {
  color: v.$color-primary;
  text-decoration: none;
  transition: color 0.2s ease;

  &:hover,
  &:focus {
    color: v.$color-primary-light;
    text-decoration: underline;
  }

  &:active {
    opacity: 0.8;
  }
}

// ------------------------------------------------------
// 7. Utility-Klassen
// ------------------------------------------------------

.u-text-center  { text-align: center !important; }
.u-text-justify { text-align: justify !important; }
.u-text-upper   { text-transform: uppercase; letter-spacing: 0.05em; }

.u-text-light   { color: v.$color-text-light !important; }
.u-text-white   { color: #fff !important; }

.u-text-bold     { font-weight: v.$font-weight-bold !important; }
.u-text-semibold { font-weight: v.$font-weight-semibold !important; }

// ------------------------------------------------------
// 8. Responsive Feinschliff (Intro, Teaser etc.)
// ------------------------------------------------------

.c-intro-text {
  font-size: fluid-size(18px, 22px);
  line-height: 1.7;
  color: v.$color-text;
  max-width: 65ch;
  margin: 0 auto 2rem auto;
  text-align: center;
}

// ------------------------------------------------------
// Ende der Typografie
// ======================================================