{namespace f=TYPO3\CMS\Fluid\ViewHelpers}

<nav class="c-menu js-menu" aria-label="Hauptnavigation" data-menu-root>
    <!-- Toggle -->
    <button class="c-menu__toggle"
            type="button"
            aria-controls="primary-menu-wrapper"
            aria-expanded="false"
            data-menu-toggle>
        <span aria-hidden="true"></span>
        <span class="u-visually-hidden">Men√º</span>
    </button>

    <!-- Wrapper -->
    <div id="primary-menu-wrapper" class="c-menu__wrapper" data-menu-wrapper>
        <ul class="c-menu__list" role="list">
            <f:for each="{menuMain}" as="item">
                <li class="c-menu__item {f:if(condition:item.children, then:'has-submenu')}"
                    {f:if(condition:item.children, then:'data-has-submenu="true"')}>
                <f:if condition="{item.children}">
                    <f:then>
                        <a href="{item.link}"
                           class="c-menu__link js-menu-parent"
                           aria-haspopup="true"
                           aria-expanded="false"
                           aria-controls="submenu-{item.uid}"
                           data-menu-parent>
                            {item.title}
                        </a>
                        <div id="submenu-{item.uid}" class="c-menu__submenu" role="group" data-menu-submenu>
                            <f:for each="{item.children}" as="child">
                                <a href="{child.link}" class="c-menu__submenu-link">{child.title}</a>
                            </f:for>
                        </div>
                    </f:then>
                    <f:else>
                        <a href="{item.link}" class="c-menu__link">{item.title}</a>
                    </f:else>
                </f:if>
                </li>
            </f:for>
        </ul>
    </div>
</nav>
